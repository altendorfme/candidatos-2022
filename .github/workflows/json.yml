name: ğŸš€ Atualizar dados do TSE (JSON)

on:
  schedule:
    - cron: "0 3 * * *"

jobs:

  build:
    name: ğŸ–¥ï¸ Iniciando Ubuntu na ultima versÃ£o
    runs-on: ubuntu-latest

    steps:
    - name: ğŸšš Baixar a ultima versÃ£o
      uses: actions/checkout@v3

    - name: ğŸ˜ Configurar PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
        extensions: zip

    - name: ğŸ“¦ Instalando dependencias
      run: composer install --prefer-dist --no-progress

    - name: ğŸ”½ Baixar dados
      run: php json.php

    - name: ğŸ’¾ Enviar mudanÃ§as
      uses: stefanzweifel/git-auto-commit-action@v4
      with:
        commit_message: "ğŸ¤– Dados atualizados"
        file_pattern: 2022/json/*.json 2022/csv/*.csv
